services:
  api:
    build:
      context: .
      dockerfile: api/Dockerfile
    volumes:
      - ./data:/app/data # 데이터 영속성 볼륨 설정
    # 필요시 헬스체크 추가
    expose:
      - "5000" # Flask 앱이 리슨하는 포트 노출

  web:
    image: nginx:1.25
    ports:
      - "8080:8080"
    volumes:
      - ./nginx/html:/usr/share/nginx/html:ro
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
    depends_on:
      - api # api 서비스가 먼저 시작되도록 설정